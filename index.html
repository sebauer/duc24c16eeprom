<!DOCTYPE html>
<html>
  <head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <title>Ducati 24C16 / I2K Dash Tool</title>

    <style>
      .bold-text {
        font-weight: 500;
      }
    </style>
  </head>

  <body>
    <!--JavaScript at end of body for optimized loading-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script src="main.js"></script>

    <div class="section no-pad-bot red darken-4 white-text">
      <h1 class="header center">Ducati Dash Tool</h1>
      <h5 class="center">For 24C16/I2K</h5>
      <br/>
    </div>

    <div class="container">
      <div class="divider"></div>

      <div class="section">
        <div class="row">
          <div class="col s12 center-align grey-text text-lighten-1 light">
            This tool is used to read and process data from Ducati dashboards equipped with a 24C16 EEPROM and I2K immobilizer chip. It enables you to display and edit the odometer reading, recover immo bypass codes, and access the key codes of the programmed keys.
          </div>
        </div>
      </div>

      <div class="divider"></div>
      
      <div class="section">
        <!-- File Selector -->
        <div class="row">
          <div class="col s8 offset-s2">

            <form action="#">
              <div class="file-field input-field">
                <div class="btn red darken-4">
                  <i class="material-icons left">file_upload</i>
                  <span>Open Dump</span>
                  <input type="file" accept=".bin" id="eepromFileSelector">
                </div>
                <div class="file-path-wrapper">
                  <input class="file-path validate" type="text" id="eepromFileSelectorWrapper" placeholder="EEPROM Dump, .BIN 2048 Bytes">
                </div>
              </div>
            </form>

          </div>
        </div>
        <div class="divider"></div>

        <!-- Display of mileage values -->
        <div class="container">
          <div class="row">
            <div class="col s12 center-align">
              <h5>Odometer Reading</h5>
            </div>
          </div>
          <div class="row">
            <div class="col s6 right-align bold-text">
              Odometer Reading
            </div>
            <div class="col s6" id="mileageDisplay">
              -
            </div>
          </div>
          <div class="row">
            <div class="col s6 right-align bold-text">
              Odometer Checksum
            </div>
            <div class="col s6 left-align">
              <span id="checksumDisplay">-</span>
              <i class="material-icons green-text text-darken-1 hide tooltipped" style="display: inline-flex; vertical-align: -6px;" data-position="right" data-tooltip="Checksum successfully verified" id="checksumCorrectIcon">verified_user</i>
              <i class="material-icons red-text text-darken-1 hide tooltipped" style="display: inline-flex; vertical-align: -6px;" data-position="right" data-tooltip="Checksum validation failed" id="checksumMismatchIcon">error</i>
            </div>
          </div>
        </div>

        <div class="divider"></div>

        <!-- Display of immobilizer related values -->
        <div class="container">
          <div class="row">
            <div class="col s12 center-align">
            <h5>Immobilizer</h5>
            </div>
          </div>
          <div class="row">
            <div class="col s6 right-align bold-text">
              Immo Bypass Code 1
            </div>
            <div class="col s6" id="immoBypass1Display">
              -
            </div>
          </div>
          <div class="row">
            <div class="col s6 right-align bold-text">
              Immo Bypass Code 2
            </div>
            <div class="col s6" id="immoBypass2Display">
              -
            </div>
          </div>
          <div class="row">
            <div class="col s6 right-align bold-text">
              Key Code 1
            </div>
            <div class="col s6" id="keyCode1Display">
              -
            </div>
          </div>
          <div class="row">
            <div class="col s6 right-align bold-text">
              Key Code 2
            </div>
            <div class="col s6" id="keyCode2Display">
              -
            </div>
          </div>
        </div>
        
        <div class="divider"></div>

        <!-- Editing of mileage values -->
        <div class="container">
          <div class="row">
            <div class="col s12 center-align">
              <h5>Odometer Adjustment</h5>
            </div>
          </div>
          <div class="row">
            <div class="col s6 input-field">
              <input id="mileageInput" type="number" class="validate" placeholder="123456" min="0" step="0.1" disabled>
              <label for="mileageInput">New Odometer Value</label>
            </div>
            <div class="col s6 input-field">
              <input id="checksumNew" type="text" placeholder="xx" disabled>
              <label for="checksumNew">New Odometer Checksum</label>
            </div>
          </div>
          <div class="row">
            <div class="col s12 center-align">
              <a class="waves-effect waves-light btn red darken-4 disabled modal-trigger" href="#downloadModal" id="downloadButton"><i class="material-icons left">save</i>Save modified File</a>
              <div id="downloadModal" class="modal">
                <div class="modal-content">
                  <h4>Important Notice</h4>
                  <p>Messing with the odometer can get you into legal hot water, depending on where you live. On top of that, the checksums might be off and the dump could be totally borked. If you decide to flash this thing, that’s on you – use at your own risk.</p>
                </div>
                <div class="modal-footer">
                  <a href="#!" class="modal-close waves-effect waves-green btn-flat grey lighten-2">Disagree</a>
                  <a href="#!" class="modal-close waves-effect waves-green btn-flat amber darken-2 white-text" id="startDownloadButton">I understand the risks, continue</a>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="divider"></div>

      </div>
    </div>
    
    <footer class="page-footer red darken-4">
      <div class="footer-copyright">
        <div class="container">
          Made by <a class="red-text text-lighten-3" href="https://github.com/sebauer">sebauer</a> | <a class="red-text text-lighten-3" href="https://github.com/sebauer/duc24c16eeprom">View Project on GitHub</a>
        </div>
      </div>
    </footer>
  </body>
</html>